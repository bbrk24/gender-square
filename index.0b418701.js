CanvasRenderingContext2D.prototype.curve=CanvasRenderingContext2D.prototype.curve||function(n,r,t,e){r="number"==typeof r?r:.5,t=t||25;var o,u=1,a=n.length,h=0,s=new Float32Array((a-2)*t+2+(e?2*t:0)),f=new Float32Array(4*(t+2)),i=4;for(o=n.slice(0),e?(o.unshift(n[a-1]),o.unshift(n[a-2]),o.push(n[0],n[1])):(o.unshift(n[1]),o.unshift(n[0]),o.push(n[a-2],n[a-1])),f[0]=1;u<t;u++){var p=u/t,v=p*p,l=v*p,c=2*l,g=3*v;f[i++]=c-g+1,f[i++]=g-c,f[i++]=l-2*v+p,f[i++]=l-v}function y(n,e,o){for(var u,a=2;a<o;a+=2){var f=n[a],i=n[a+1],p=n[a+2],v=n[a+3],l=(p-n[a-2])*r,c=(v-n[a-1])*r,g=(n[a+4]-f)*r,y=(n[a+5]-i)*r;for(u=0;u<t;u++){var C=u<<2,d=e[C],w=e[C+1],x=e[C+2],A=e[C+3];s[h++]=d*f+w*p+x*l+A*g,s[h++]=d*i+w*v+x*c+A*y}}}for(f[++i]=1,y(o,f,a),e&&((o=[]).push(n[a-4],n[a-3],n[a-2],n[a-1]),o.push(n[0],n[1],n[2],n[3]),y(o,f,4)),a=e?0:n.length-2,s[h++]=n[a],s[h]=n[a+1],u=0,a=s.length;u<a;u+=2)this.lineTo(s[u],s[u+1]);return s};