class GenderSquare{static codingStr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_";static pointRadius=3;points=[];#t=.5;get tension(){return this.#t}set tension(t){this.#t=Math.max(0,Math.min(t,1)),Number.isNaN(this.#t)&&(this.#t=.5)}constructor(t){let e;e="string"==typeof t.superElement?document.querySelector(t.superElement):t.superElement,this.element=document.createElement("canvas"),this.element.id="square",this.element.width=t.size,this.element.height=t.size,null==e||e.appendChild(this.element),this.context=this.element.getContext("2d"),this.context.lineJoin="round",this.context.translate(.5,.5),this.showPoints=t.showPoints,void 0!==t.initialValues&&this.loadData(t.initialValues)}loadData(t){const e=this.element.width,n=GenderSquare.codingStr.length-1;t.length%2&&(this.#t=Math.round(100*GenderSquare.codingStr.indexOf(t[t.length-1])/n)/100,t=t.substring(0,t.length-1)),this.points=[...t].map((t=>Math.round(GenderSquare.codingStr.indexOf(t)*e/n)))}saveData(){const t=this.element.width,e=GenderSquare.codingStr.length-1;return this.points.map((n=>GenderSquare.codingStr[Math.round(n*e/t)])).join("")+GenderSquare.codingStr[Math.round(this.#t*e)]}redraw(){if(this.context.clearRect(-1,-1,this.element.width+2,this.element.height+2),this.context.beginPath(),this.context.moveTo(this.points[0],this.points[1]),this.context.curve(this.points,1-this.#t,25,!0),this.context.closePath(),this.context.strokeStyle="yellow",this.context.lineWidth=GenderSquare.pointRadius,this.context.fillStyle="rgba(0 0 0/0.2)",this.context.fill(),this.context.stroke(),this.showPoints){this.context.lineWidth=1;for(let t=0;t<this.points.length;t+=2)this.context.strokeStyle="black",this.context.strokeRect(this.points[t]-GenderSquare.pointRadius,this.points[t+1]-GenderSquare.pointRadius,2*GenderSquare.pointRadius,2*GenderSquare.pointRadius)}}}